describe('Redirect to login page if not logged in', () => {
  it('Clear browser cookies', () => {
    // https://on.cypress.io/clearcookies
    cy.getCookies().should('be.empty')

    // cy.clearCookies() yields null
    cy.clearCookies()

    cy.getCookies().should('be.empty')
  })

  it('Should navigate to the login page when unauthenticated user tries to access a page requiring authentication', () => {
    // Navigate to page that requires authentication
    cy.visit('http://localhost:3000/dashboard')

    // Should renagivate to login page, The url should include "/login"
    cy.url().should('include', '/login')

    // The new page should contain an h1 with "E²S Console"
    cy.get('h1').contains('E²S Console')
  })
  })

  describe('Navigation to dashboard page when logged in', () => {
    it('Should navigate to dashboard when login cookies set', () => {
      // https://on.cypress.io/setcookie
      cy.getCookies().should('be.empty')
  
      cy.setCookie('token', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwcm9maWxlUGljdHVyZUI2NCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBT0VBQUFEaENBTUFBQUFKYlNKSUFBQUFQRkJNVkVYazV1ZXV0TGVwc0xQbzZ1dXJzYlhKemMvcDYremo1ZWEydTc2b3JyS3Z0YmkwdWJ6WjNOM08wZFBBeGNmZzR1UE16OUhVMTlpOHdjUER4OHFLWHRHaUFBQUZURWxFUVZSNG5PMmQzWHF6SUF5QWhVRDkxNkwzZjYrZjFtN3RWdnROSU5GZzh4NXRaMzJmUUFJb01jc0VRUkFFUVJBRVFSQUVRUkFFUVJBRVFSQUVRUkFFUVJBRVFSQUVRVGdoQUpEMWpXdG5YSlBQLzU0SWdOelpRdWxTbXh2VEg2b1lYWDRXUytpdmhUYnFCYTFyMjZjdkNkQ3U2aTBZWGJkWjBvNEExcnpWKzVJY0UzWUUrejU4VDQ1bHFvN2cxQWEvSlk1dGdvcVFGM3FiMzgyeDdsTnpCTGN4ZnQrTzE3UVVZZlFJNElJZWtsS3NQU040aTZMS2ovN1ptOG45OVJiSEpwRXc5Z0VCWE5CcEtJWUxKcUtZUndqT2lrZi8vcitKOFpzVnVhY2JxQ01ObGVJOVRxR0xHcU16aG5WZEJPZGQ2Ri9SbHJGaWppQ29WTWszMjBDQklhaFV4VFdJMEtLRWNKcUtiTWRwZEpiNVF2ZEhxNndDSTVxaEtsZ0dNUy9SQkhrdWJXREFFK1FaeEI0eGhDeURpRGtMWnhnR0VWZFFsZHpTS2JUSWhtWmtGa1NFUGNWdm1CbjJTTXVaQjlvZDdmUURzTWlEZEtKakZVU0NRYXJNNVdpclozQzJUVC9odFlueVBjUGZnckZIV3owQkk3NGdyNkovSVppR1V4QVpHUUxxbXZRTFRydEUvR280WXhoVlJJcEV3K3N3dzFJSWNxcjVOS21VVXpMRjNkNC9xUGtZSXAyVC9vYlB1ZW1sb2pGVVI0dDlRMlZvamhiN0JtZ0VsV0h6TFBIOGh1Y2ZwZWZQTkZUVmdzOWgxQWRVL1Bpbjk2dndXYldkZitYOUFic24zT2RPMzRhTWRzRG5QOFdnS1lpc1RxSTZDa05HcVpRbzFYQTZFZjZBVTMyU0p6T2NCdWtIUEYwNy94TlNnbUhLYTVCT2h0ZXp2Nm1BL3JZSnB3WE5BbmJSWjFYdUYzQnpEY08zdnBBMytueTI5MDlnYnFFNGhoRDNMSVBoTEx5Qk5oUFp2YlozQiszdFBZYTE4QTdhdVNsWFFheUt3VFBOTEtEY3VPQjB4UFlLRFBGVGtXc2V2UVBSWjFKOEhqaTlJMUtRMzRyN2haaHJ3TndPWjk3UXhOeDBkcnduNFFJMHdRazFEY0VzZktDV0tkeFZ2eFBTTlVJcC9rbm1BWFQrblQrS28zKzBIOTZyY05iM20xZng3TUJUSmRlQko3dUZjV3NjMHd2Z0FzQzRwUk9XMGwyaW5iQW1JQnYvN0dabXVoUUg2QVBJMnJyOFQwZTZ5dVpKKzgwQTlMWmVHNjJUM3RpazMxWHd4dHdaY2l6S3VUSGtNakIxV2RaZGU0S21pYy9BNVpJM3JyMWFlMjFkMDhQbFZIWWZBYXh3OUc5Q1lSYkorOFpkYlRjTVJWMVhNM1ZkRjBNMzJ2dG9UZFowK3UyOXMwT3R0SjViejY0VXdpbmphRk1WWTl2a3FjM0tLU3hOMjFYbCswTDRRM1Z1djF0WWwwcHFuWDZtczRYZXRGejdnZFpWQWdVRW9KbnRmT1VlNFp3c0hkOUZ6cVEzVnY2eGU0MWwwWEpjcWNLbDZUWnZsdjdDbEFXM0JzcVFXNFg3eXBBcEI4ZG1UZ0s0SVg1d3ZxSVZqMzNIdEQycVNHNEJxem54ZEllZkwyN1k0c2FoaTBNZElkdlVzRHZhOGFnR0diQ3RJVG1DWTMxTUhEMk8wdUlkaC8wckpEUTFWWDVaZHh6M3JSMlFEYnY2cVhsOXZ1ZHpxUXRHbTFKdjlMRFhPc2Z2dkI3VmNaOFBES0QwbVExVkhQWVE5TytZajRoUjFJVUQ4ckJubjNobzJtOG9RTXhiQ0ZpS2xMMmlvU1c1aGVlSnFlZ0VENTJDenhDdGNHRDNLdjhXbXM5RVlMeVVod2FGSWhTTUJDbGV2V0VtaUsvSWFvZ3U0SDdzZzZwcFFoUUc4UlVxaXZ1VEdPQUpPZzZGZmdXMHEwTTBQUU1STUVnWGFlTmYzU1lEWjhQSU1JMCt3SGdyL01nTjd3WXdwaUxqQ0NxTTZ5ZFVEWkxRaUI2bkRkTkM4U0R5aWczalBQcEZYR2NDOU84QlVCRFZtZ0JZNTlFN01kLzM1TG9lL1VWRUVDRUp3WWdnSmpFTFo0SjcxU2FRU0JlQzAybjREYTI5Q2F5Sk5BMjhTQWhkMkNReUMxWHc2cFNtR1NJTlFWdU1oQVpwNERDbGFuOU1nbWtERE5tZXpxd1M4c2d0bFhLL0VQQmhvYVNtWVZDL0Y3SU8xalFFZEhPbGFicEtoMytqekxRU1RVaXE0WDJJK0lwL3pVOHJsYXFBdmtTMjFFbFIrZ3F1M3piampMK2hJQWlDSUFpQ0lBaUNJQWlDc0NmL0FLcmZWaFNidkErREFBQUFBRWxGVGtTdVFtQ0MiLCJwYXNzd29yZCI6IiQyYiQxMCRoNVlJY2tBanFVTUFpVnZRQWVBVHJlSmk2LjhZNk5kVUp1ZU55WGVZTlkxZWJzTi9xejFSYSIsImNvbXBhbnkiOiJ0ZXN0Y29tcGFueSIsImVtYWlsQWRkcmVzcyI6InZ1am92aWNtQGNhcmRpZmYuYWMudWsiLCJsYXN0TmFtZSI6IlZ1am92aWMiLCJwZXJtaXNzaW9ucyI6eyJkaXJlY3QiOlt7Im5hbWUiOiJ1c2FnZV9hbGwiLCJkZXNjcmlwdGlvbiI6IkFsbCBQZXJtaXNzaW9ucyBmb3IgdGhlIHVzYWdlIHRhYiJ9XSwiZ3JvdXBzIjpbIkFkbWluIl19LCJmaXJzdE5hbWUiOiJNaWxvcyIsImlhdCI6MTY3MDY4NjA2NCwiZXhwIjoxNjcxMjkwODY0fQ.pi9tUNXjCbC6iQCSmbwht1OaK61CZ-lm337Z-2syhjg',)
  
      // Assign valid cookie for user
      cy.getCookie('token').should('have.property', 'value', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwcm9maWxlUGljdHVyZUI2NCI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBT0VBQUFEaENBTUFBQUFKYlNKSUFBQUFQRkJNVkVYazV1ZXV0TGVwc0xQbzZ1dXJzYlhKemMvcDYremo1ZWEydTc2b3JyS3Z0YmkwdWJ6WjNOM08wZFBBeGNmZzR1UE16OUhVMTlpOHdjUER4OHFLWHRHaUFBQUZURWxFUVZSNG5PMmQzWHF6SUF5QWhVRDkxNkwzZjYrZjFtN3RWdnROSU5GZzh4NXRaMzJmUUFJb01jc0VRUkFFUVJBRVFSQUVRUkFFUVJBRVFSQUVRUkFFUVJBRVFSQUVRVGdoQUpEMWpXdG5YSlBQLzU0SWdOelpRdWxTbXh2VEg2b1lYWDRXUytpdmhUYnFCYTFyMjZjdkNkQ3U2aTBZWGJkWjBvNEExcnpWKzVJY0UzWUUrejU4VDQ1bHFvN2cxQWEvSlk1dGdvcVFGM3FiMzgyeDdsTnpCTGN4ZnQrTzE3UVVZZlFJNElJZWtsS3NQU040aTZMS2ovN1ptOG45OVJiSEpwRXc5Z0VCWE5CcEtJWUxKcUtZUndqT2lrZi8vcitKOFpzVnVhY2JxQ01ObGVJOVRxR0xHcU16aG5WZEJPZGQ2Ri9SbHJGaWppQ29WTWszMjBDQklhaFV4VFdJMEtLRWNKcUtiTWRwZEpiNVF2ZEhxNndDSTVxaEtsZ0dNUy9SQkhrdWJXREFFK1FaeEI0eGhDeURpRGtMWnhnR0VWZFFsZHpTS2JUSWhtWmtGa1NFUGNWdm1CbjJTTXVaQjlvZDdmUURzTWlEZEtKakZVU0NRYXJNNVdpclozQzJUVC9odFlueVBjUGZnckZIV3owQkk3NGdyNkovSVppR1V4QVpHUUxxbXZRTFRydEUvR280WXhoVlJJcEV3K3N3dzFJSWNxcjVOS21VVXpMRjNkNC9xUGtZSXAyVC9vYlB1ZW1sb2pGVVI0dDlRMlZvamhiN0JtZ0VsV0h6TFBIOGh1Y2ZwZWZQTkZUVmdzOWgxQWRVL1Bpbjk2dndXYldkZitYOUFic24zT2RPMzRhTWRzRG5QOFdnS1lpc1RxSTZDa05HcVpRbzFYQTZFZjZBVTMyU0p6T2NCdWtIUEYwNy94TlNnbUhLYTVCT2h0ZXp2Nm1BL3JZSnB3WE5BbmJSWjFYdUYzQnpEY08zdnBBMytueTI5MDlnYnFFNGhoRDNMSVBoTEx5Qk5oUFp2YlozQiszdFBZYTE4QTdhdVNsWFFheUt3VFBOTEtEY3VPQjB4UFlLRFBGVGtXc2V2UVBSWjFKOEhqaTlJMUtRMzRyN2haaHJ3TndPWjk3UXhOeDBkcnduNFFJMHdRazFEY0VzZktDV0tkeFZ2eFBTTlVJcC9rbm1BWFQrblQrS28zKzBIOTZyY05iM20xZng3TUJUSmRlQko3dUZjV3NjMHd2Z0FzQzRwUk9XMGwyaW5iQW1JQnYvN0dabXVoUUg2QVBJMnJyOFQwZTZ5dVpKKzgwQTlMWmVHNjJUM3RpazMxWHd4dHdaY2l6S3VUSGtNakIxV2RaZGU0S21pYy9BNVpJM3JyMWFlMjFkMDhQbFZIWWZBYXh3OUc5Q1lSYkorOFpkYlRjTVJWMVhNM1ZkRjBNMzJ2dG9UZFowK3UyOXMwT3R0SjViejY0VXdpbmphRk1WWTl2a3FjM0tLU3hOMjFYbCswTDRRM1Z1djF0WWwwcHFuWDZtczRYZXRGejdnZFpWQWdVRW9KbnRmT1VlNFp3c0hkOUZ6cVEzVnY2eGU0MWwwWEpjcWNLbDZUWnZsdjdDbEFXM0JzcVFXNFg3eXBBcEI4ZG1UZ0s0SVg1d3ZxSVZqMzNIdEQycVNHNEJxem54ZEllZkwyN1k0c2FoaTBNZElkdlVzRHZhOGFnR0diQ3RJVG1DWTMxTUhEMk8wdUlkaC8wckpEUTFWWDVaZHh6M3JSMlFEYnY2cVhsOXZ1ZHpxUXRHbTFKdjlMRFhPc2Z2dkI3VmNaOFBES0QwbVExVkhQWVE5TytZajRoUjFJVUQ4ckJubjNobzJtOG9RTXhiQ0ZpS2xMMmlvU1c1aGVlSnFlZ0VENTJDenhDdGNHRDNLdjhXbXM5RVlMeVVod2FGSWhTTUJDbGV2V0VtaUsvSWFvZ3U0SDdzZzZwcFFoUUc4UlVxaXZ1VEdPQUpPZzZGZmdXMHEwTTBQUU1STUVnWGFlTmYzU1lEWjhQSU1JMCt3SGdyL01nTjd3WXdwaUxqQ0NxTTZ5ZFVEWkxRaUI2bkRkTkM4U0R5aWczalBQcEZYR2NDOU84QlVCRFZtZ0JZNTlFN01kLzM1TG9lL1VWRUVDRUp3WWdnSmpFTFo0SjcxU2FRU0JlQzAybjREYTI5Q2F5Sk5BMjhTQWhkMkNReUMxWHc2cFNtR1NJTlFWdU1oQVpwNERDbGFuOU1nbWtERE5tZXpxd1M4c2d0bFhLL0VQQmhvYVNtWVZDL0Y3SU8xalFFZEhPbGFicEtoMytqekxRU1RVaXE0WDJJK0lwL3pVOHJsYXFBdmtTMjFFbFIrZ3F1M3piampMK2hJQWlDSUFpQ0lBaUNJQWlDc0NmL0FLcmZWaFNidkErREFBQUFBRWxGVGtTdVFtQ0MiLCJwYXNzd29yZCI6IiQyYiQxMCRoNVlJY2tBanFVTUFpVnZRQWVBVHJlSmk2LjhZNk5kVUp1ZU55WGVZTlkxZWJzTi9xejFSYSIsImNvbXBhbnkiOiJ0ZXN0Y29tcGFueSIsImVtYWlsQWRkcmVzcyI6InZ1am92aWNtQGNhcmRpZmYuYWMudWsiLCJsYXN0TmFtZSI6IlZ1am92aWMiLCJwZXJtaXNzaW9ucyI6eyJkaXJlY3QiOlt7Im5hbWUiOiJ1c2FnZV9hbGwiLCJkZXNjcmlwdGlvbiI6IkFsbCBQZXJtaXNzaW9ucyBmb3IgdGhlIHVzYWdlIHRhYiJ9XSwiZ3JvdXBzIjpbIkFkbWluIl19LCJmaXJzdE5hbWUiOiJNaWxvcyIsImlhdCI6MTY3MDY4NjA2NCwiZXhwIjoxNjcxMjkwODY0fQ.pi9tUNXjCbC6iQCSmbwht1OaK61CZ-lm337Z-2syhjg')

      // Try accessing dashboard page
      cy.visit('http://localhost:3000/dashboard')

      // Reload page
      cy.reload()
      
      // The new url should include "/dashboard"
      cy.url().should('include', '/dashboard')
  
      // The new page should contain an h1 with "Dashboard"
      cy.get('h1').contains('Dashboard')
    })
  })
  // it('should navigate to the dashboard page', () => {
  //   // Start from the dashboard page
  //   cy.visit('http://localhost:3000/login')

  //   // Find a link with an href attribute containing "usage" and click it
  //   cy.get('a[href*="login"]').click()

  //   // The new url should include "/dashboard"
  //   cy.url().should('include', '/dashboard')

  //   // The new page should contain an h1 with "Dashboard"
  //   cy.get('h1').contains('Dashboard')
  // })